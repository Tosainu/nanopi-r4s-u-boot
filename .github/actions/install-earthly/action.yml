name: Install Earthly
description: Install Earthly v0.7.2 (earthly-linux-amd64) to ~/.local/bin/earthly
inputs: {}
runs:
  using: composite
  steps:
    - run: |
        cd "$(mktemp -d)"
        curl -LO https://github.com/earthly/earthly/releases/download/v0.7.2/earthly-linux-amd64
        echo 'e0b3e9faf44d5d04b80887c740552f9689da5cca6a2443ae6108873cea494c928e4eee6ee107102306d0b6d7f6ec2adbd96059d6b78e11b5b408c315b522e7cf  earthly-linux-amd64' | sha512sum -c
        mkdir -p ~/.local/bin
        mv earthly-linux-amd64 ~/.local/bin/earthly
        chmod +x ~/.local/bin/earthly
        EARTHLY_DISABLE_ANALYTICS=true earthly config global '{disable_analytics: true, disable_log_sharing: true}'
        earthly --version
      shell: bash
